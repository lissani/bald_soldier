# 대머리 용사의 모자 구하기 대작전

### [요구 조건]
**(a) 제공된 물체 9개 중 5개를 선택 후, 각 물체에 대하여 서로 다른 창의적인 정적/동적 효과 생성**
  - 집 (정적 효과 생성) : 시간이 흐름에 따라 배경 조도가 점점 어두워지면, 집 외벽 색상이 어두워지고 집 내부에 형광등이 켜지는 효과를 구현했습니다. 밤낮이 바뀌며 해당 효과는 반복되며, 이에 더불어 배경 색상도 함께 변화합니다.
  - 자동차1 (축소 + 이동) : 움직이며 크기가 계속해서 변하는 동적 효과를 생성했으며, 이는 요구 조건(c)에서 더욱 자세히 설명하겠습니다.
  - 자동차2 (확대 + 이동) : 마찬가지로 움직이며 크기가 계속해서 변하는 동적 효과를 생성했으며, 이는 요구 조건(c)에서 더욱 자세히 설명하겠습니다.
  - 모자 (회전 + 중심 궤도 이동) : 삼각함수의 궤적을 따라 회전하며 움직이는 동적 효과를 생성했으며, 이는 요구 조건(b)에서 더욱 자세히 설명하겠습니다.
  - 검 (계층적 회전 위치 조정) : 계층적 모델링과 마우스 조작을 통한 동적 효과를 생성하였으며, 이는 요구 조건(d)와 요구 조건(e)에서 더욱 자세히 설명하겠습니다.

**(b) 최소 한 개의 물체는 삼각 함수의 궤적을 따라 자연스럽게 회전하면서 움직여야 함**
  - 모자는 원 궤도 중심을 기준으로 이동 경로가 삼각 함수 기반으로 회전하고 있으며, 동시에 모자의 자체 모습도 회전합니다. 이를 통해 바람에 의해 날아가는 모자를 자연스럽고 역동적으로 표현하였습니다.
  - 모자는 무작위로 변하는 중심점을 기준으로 회전 각에 따라 원형 궤도를 움직입니다.
  - 따라서 각 프레임마다 현재 회전 각 만큼 모자 자체를 회전한 후(glm::rotate), 무작위로 변하는 중심점을 기준으로 회전각에 따른 원형 궤도를 이동합니다.(glm::translate)

**(c) 최소 두 개의 물체는 움직이면서 서로 다른 방식으로 크기가 계속하여 변해야 함**
  - 자동차 1은 크기가 점점 작아지며 이동합니다.
  - 자동차 1은 매 프레임 왼쪽/오른쪽으로 이동합니다. 즉 화면을 가로지르는 방식으로 이동합니다. 이 때 이동 방향은 자동차가 화면 밖으로 나간 후 다시 등장할 때 마다 랜덤으로 설정됩니다.
  - 이때 scale 값을 매번 조금씩 줄이며 크기를 축소시킵니다.
  - 따라서 변화하는 각 프레임의 scale 값에 의해 자동차를 스케일 한 후(glm::scale), 해당 자동차의 위치로 이동합니다.(glm::translate)

  - 자동차 2는 크기가 점점 커지며 이동합니다.
  - 자동차 2도 마찬가지로 매 프레임 왼쪽/오른쪽으로 이동합니다. 즉 화면을 가로지르는 방식으로 이동합니다. 이 때 이동 방향은 자동차가 화면 밖으로 나간 후 다시 등장할 때 마다 랜덤으로 설정됩니다.
  - 이때 scale 값을 매번 조금씩 늘리며 크기를 확대시킵니다.
  - 따라서 변화하는 각 프레임의 scale 값에 의해 자동차를 스케일 한 후(glm::scale), 해당 자동차의 위치로 이동합니다.(glm::translate)
    
**(d) 최소 한 번의 계층적 모델링 (hierarchical modeling)을 적용한 움직임이 있어야 함**
  - 검과 강아지는 용사에 대해 계층적 모델링이 적용되었습니다.
  - 검은 병사의 오른손에 붙어 함께 움직이도록 구현되었습니다. 따라서 병사의 ModelMatrix를 기반으로 SwordMatrix를 생성하였습니다. 검이 자연스럽게 위치하도록 약간 회전한 뒤(glm::rotate), 병사의 오른손에 위치하도록 이동하였습니다.(glm::translate)
  - 강아지는 병사의 왼쪽에서 상대 위치를 유지하며 점프하는 움직임을 구현했습니다. 점프 움직임에 대한 내용은 요구 조건(e)에서 더욱 자세히 설명하겠습니다. 강아지도 마찬가지로 병사의 ModelMatrix를 기반으로 PetMatrix를 생성하였습니다. 이후 병사의 왼쪽 발 근처에 위치하도록 이동하였습니다.(glm::translate)

**(e) 최소 한 개의 물체는 마우스로 조작을 할 수 있어야 함**
  - 병사는 마우스 클릭에 따라 이동할 수 있으며, 따라서 병사를 기준으로 계층적으로 연결된 검과 강아지 또한 함께 움직입니다.
  - 마우스 이벤트 콜백 함수를 등록한 뒤(glutMouseFunc 함수), 해당 함수에 인자로 들어가는 mouse 콜백 함수를 정의합니다. 이때, 마우스의 화면 좌표를 OpenGL 좌표계로 변환하는 과정이 들어갑니다.
  - 마우스 버튼이 왼쪽이고, 눌러진 상태인 경우 해당 좌표를 병사의 목표 위치로 설정합니다. 이후 display 함수에서 병사는 delta_time을 곱한 방향 벡터에 따라 선형적으로 움직이며, 병사의 ModelMatrix는 매 프레임마다 glm::translate로 갱신됩니다. 병사를 기준으로 아핀 변환 계층을 구성한 검과 강아지 또한 병사의 위치 변화를 그대로 따르며 자연스럽게 움직입니다.

**(f) 충분히 복잡도가 있는 2차원 기하 물체를 자신이 최대 2개 모델링 한 후, 위의 물체들처럼 창의적인 동적 효과를 생성**
  - 도로 (동적 효과 없음)
  - 병사 (마우스 기반 이동): 몸통, 팔, 다리 등을 다양한 다각형으로 나누어 모델링하였습니다. 병사의 오른쪽 부위만 모델링한 후, 이를 y축 대칭하여(glm::scale) 왼쪽 부위를 효율적으로 생성하였습니다. 병사의 동적 효과에 대해서는 요구 조건(e)에 충분히 설명되어 있으므로 생략하겠습니다.
  - 강아지 (제자리 점프): 몸통, 다리, 꼬리, 귀, 얼굴 등을 다양한 다각형으로 나누어 모델링하였습니다. 강아지는 요구 조건(d)에서도 설명하였듯이 병사 왼쪽 아래의 상대적인 위치를 유지하며 이동합니다. 여기에 sin 함수를 기반으로 한 주기적인 상하 이동을 추가하여 강아지가 점프하듯 위아래로 움직이는 애니메이션을 구현하였습니다. 변화하는 pet_jump_offset을 y값으로 매 프레임마다 상하이동을 합니다.(glm::translate) 또한 강아지 모델링 시, 원점을 강아지의 바닥부분이 오도록 하였기에 스케일 연산으로 찌그러짐이 발생하지 않도록 미리 각 정점에서 크기를 적용한 후 렌더링하였습니다.
